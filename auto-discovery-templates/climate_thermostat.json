{
  "topic": "homeassistant/climate/${deviceSN}_devi_thermostat/config",
  "template": {
    "name": "DeviReg Smart Thermostat",
    "device_class": "climate",
    "unique_id": "id_${deviceSN}_devi_thermostat",
    "default_entity_id": "devireg_${deviceSN}_thermostat",

	"availability_topic": "devi/state/${deviceSN}/binary_sensor_device_connected",
	"payload_available": "ON",
	"payload_not_available": "OFF",
	
    "current_temperature_topic": "devi/state/${deviceSN}/temperature_current",

    "temperature_state_topic": "devi/state/${deviceSN}/temperature_target",
    "temperature_command_topic": "devi/command/${deviceSN}/set_temperature_target",

    "preset_mode_state_topic": "devi/state/${deviceSN}/select_control_mode",
    "preset_mode_command_topic": "devi/command/${deviceSN}/thermostat_preset",
    "preset_modes": ["SET OVERRIDE", "MANUAL", "OVERRIDE", "SCHEDULE", "VACATION", "PAUSE", "OFF"],

    "mode_state_topic": "devi/state/${deviceSN}/select_control_mode",
    "mode_command_topic": "devi/command/${deviceSN}/thermostat_preset",
    "modes": ["heat", "off", "auto"],
    "mode_state_template": "{{ 'off' if value == 'OFF' else 'auto' if value == 'SCHEDULE' else 'heat'}}",
	"mode_command_template": "{{ 'OFF' if value == 'off' else 'SCHEDULE' if value == 'auto' else 'MANUAL'}}",
	
    "min_temp": 3,
    "max_temp": 40,
    "temp_step": 0.5,
    "temperature_unit": "C",
	
	"action_topic": "devi/state/${deviceSN}/binary_sensor_heating_state",
    "action_template": "{{ 'heating' if value == 'ON' else 'idle' }}",

    "icon": "mdi:heating-coil",
    "device": {
      "identifiers": [
        "${deviceSN}"
      ],
      "manufacturer": "Danfoss",
      "name": "DeviReg ${deviceSN}",
      "model": "DeviReg Smart Thermostat"
    }
  }
}
